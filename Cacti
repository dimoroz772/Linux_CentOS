Развертывание сервера с системой мониторинга Cacti на ОС Linux CentOS 7
--------------------------------------------------------------------------------------------------------------------------------------------------------------
Все описанные ниже действия выполнялись под пользователем root
--------------------------------------------------------------------------------------------------------------------------------------------------------------
Всем привет! Для реализации данного проекта мне потребовалось:
1) Прописать статические IP-адреса;
2) Обновить пакеты ОС Linux CentOS 7 до последней версии;
3) Отключить систему принудительного контроля доступа SELinux;
4) Подключить репозиторий ОС Fedora;
5) Установить пакета Apache;
6) Установить пакеты SNMP and RRDTool;
7) Установить пакеты сервера MariaDB;
8) 
--------------------------------------------------------------------------------------------------------------------------------------------------------------
Предисловие:
------------
Cacti — open-source веб-приложение, система позволяет строить графики при помощи RRDtool. Cacti собирает статистические данные за определённые 
временные интервалы и позволяет отобразить их в графическом виде.
------------
SELinux — реализация системы принудительного контроля доступа, которая может работать параллельно с классической избирательной системой контроля доступа.
------------
EPEL (Extra Packages for Enterprise Linux) ― это открытое бесплатное хранилище пакетов от Fedora. Оно содержит пакеты дополнительного программного обеспечения
для Linux. Пакеты этого репозитория не конфликтуют с пакетами RHEL, поэтому этот репозиторий самый безопасный в использовании для CentOS.
--------------------------------------------------------------------------------------------------------------------------------------------------------------
1) Для избежания потери связи с АРМ/VM, нужно позаботиться о статической IP-адресации. Её можно настроить как на самой АРМ/VM, так и на самом сетевом 
устройстве. Статическую адресацию можно прописать с помощью инструмента командной строки nmtui.
--------------------------------------------------------------------------------------------------------------------------------------------------------------
yum install -y NetworkManager-tui |#|#| Установка пакета nmtui для настройки сети на АРМ/VM
--------------------------------------------------------------------------------------------------------------------------------------------------------------
Гайд по тому, как пользоваться инструментом nmtui, вы можете посмотреть в интернете.
--------------------------------------------------------------------------------------------------------------------------------------------------------------
2) Обновление пакетов системы.
--------------------------------------------------------------------------------------------------------------------------------------------------------------
yum update -y && yum upgrade -y |#|#| Поиск и обновление пакетов системы
--------------------------------------------------------------------------------------------------------------------------------------------------------------
3) Отключение системы принудительного контроля доступа SELinux;
--------------------------------------------------------------------------------------------------------------------------------------------------------------
nano /etc/sysconfig/selinux |#|#| Команда для открытия конфигурационного файла "selinux"
------------
В конфигурационном файле замените строку SELINUX=enforcing на SELINUX=disabled. Перед закрытием обязательно сохраните файл!
------------
Конфигурационный файл SELinux должен выглядеть следующим образом:

# This file controls the state of SELinux on the system.
# SELINUX= can take one of these three values:
#       enforcing - SELinux security policy is enforced.
#       permissive - SELinux prints warnings instead of enforcing.
#       disabled - No SELinux policy is loaded.
SELINUX=disabled
# SELINUXTYPE= can take one of these two values:
#       targeted - Targeted processes are protected,
#       mls - Multi Level Security protection.
SELINUXTYPE=targeted

--------------------------------------------------------------------------------------------------------------------------------------------------------------
reboot |#|#| Команда для перезагрузки ARM/VM
--------------------------------------------------------------------------------------------------------------------------------------------------------------
После перезагрузки вашего устройства, можете снова ввести команду "sestatus" и убедиться в том, что у вас отключена система SELinux.
Вывод отключенной системы должен выглядеть вот так: 

SELinux status:                 disabled

--------------------------------------------------------------------------------------------------------------------------------------------------------------
4) Подключение репозитория ОС Fedora.
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm |#|#| Команда добавления EPEL-репозитория
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Для дальнейшей настройки ВМ, обязательно понадобится пакет wget.
------------
yum install -y wget |#|#| Команда для установки пакета "wget"
------------
wget http://rpms.famillecollet.com/enterprise/remi-release-7.rpm |#|#| Команда для установки репозитория "Remi"
------------
rpm -Uvh remi-release-7.rpm |#|#| Подключение репозитория "Remi"
------------
yum repolist |#|#| Команда для просмотра всех подключенных репозиториев
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
5) Установка пакета Apache
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
yum install -y httpd httpd-devel |#|#| Команда для установки пакета "Apache"
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
systemctl start httpd |#|#| Команда для запуска службы "httpd"
------------
systemctl enable httpd |#|#| Команда для добавления службы "httpd" в автозапуск ОС
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
6) Установка пакетов SNMP and RRDTool
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
yum  install -y net-snmp net-snmp-utils net-snmp-libs rrdtool |#|#| Команда для установки пакетов "SNMP" и "RRDTool"
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
systemctl start snmpd |#|#| Команда для запуска службы "snmp"
------------
systemctl enable snmpd |#|#| Команда для добавления службы "snmp" в автозапуск ОС
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
7) Установка пакетов сервера MariaDB
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
yum install mariadb-server |#|#| Команда для установки пакетов "сервера MariaDB"
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
systemctl start mariadb |#|#| Команда для запуска службы "mariadb"
------------
systemctl enable mariadb |#|#| Команда для добавления службы "mariadb" в автозапуск ОС
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Далее нужно завершить установку Mariadb слудующей командой: mysql_secure_installation. Далее нужно будет отвытить на следующие вопросы:
------------
# mysql_secure_installation
------------
Enter current password for root (enter for none): |#|#| Так как пароля для пользователя "root" ранее задано не было, на данный вопрос ответьте клавишей "Enter"
------------
Set root password? [Y/n] Y |#|#| Вопрос для установки пароля для пользователя "root"
New password:              |#|#| Строка для ввода нового пароля для пользователя "root"
Re-enter new password:     |#|#| Строка для повторения нового пароля для пользователя "root"
------------
Remove anonymous users? [Y/n] Y |#|#| Вопрос для удаления анонимных пользователей
------------
Disallow root login remotely? [Y/n] Y |#|#| Вопрос запрета удаленного входа под пользователем "root"
------------
Remove test database and access to it? [Y/n] Y |#|#| Вопрос удаления тестовой базы данных и доступа к ней
------------
Reload privilege tables now? [Y/n] Y |#|#| Вопрос о перезагрузке таблицы привилегий
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------












